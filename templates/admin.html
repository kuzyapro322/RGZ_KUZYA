{% extends "base.html" %}

{% block content %}
<div class="admin-header">
    <h2>–ü–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞</h2>
    <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∞–º–∏ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ</p>
</div>

<div class="admin-actions">
    <a href="{{ url_for('admin.add_book') }}" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é –∫–Ω–∏–≥—É</a>
</div>

<div class="admin-books-list">
    <h3>–í—Å–µ –∫–Ω–∏–≥–∏ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ ({{ books|length }})</h3>
    
    {% if books %}
    <div class="books-table">
        <table>
            <thead>
                <tr>
                    <th>ID</th>
                    <th>–û–±–ª–æ–∂–∫–∞</th>
                    <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                    <th>–ê–≤—Ç–æ—Ä</th>
                    <th>–°—Ç—Ä–∞–Ω–∏—Ü</th>
                    <th>–ò–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ</th>
                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                </tr>
            </thead>
            <tbody>
                {% for book in books %}
                <tr>
                    <td>{{ book.id }}</td>
                    <td>
                        <img src="/static/pic/{{ book.cover_image or 'default_cover.jpg' }}" 
                             alt="{{ book.title }}" class="book-cover-small"
                             onerror="this.src='/static/default_cover.jpg'">
                    </td>
                    <td>{{ book.title }}</td>
                    <td>{{ book.author }}</td>
                    <td>{{ book.pages }}</td>
                    <td>{{ book.publisher }}</td>
                    <td class="actions">
                        <a href="{{ url_for('admin.edit_book', book_id=book.id) }}" 
                           class="btn btn-outline btn-small">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                        <form method="POST" 
                              action="{{ url_for('admin.delete_book', book_id=book.id) }}" 
                              class="delete-form"
                              onsubmit="return confirm('–£–¥–∞–ª–∏—Ç—å –∫–Ω–∏–≥—É ¬´{{ book.title }}¬ª?')">
                            <button type="submit" class="btn btn-danger btn-small">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="no-books">
        <p>–í –±–∏–±–ª–∏–æ—Ç–µ–∫–µ –ø–æ–∫–∞ –Ω–µ—Ç –∫–Ω–∏–≥</p>
    </div>
    {% endif %}
</div>
{% endblock %}